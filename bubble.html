<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Chart with Mapbox</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        .tooltip {
            position: absolute;
            background-color: white;
            padding: 10px;
            border: 1px solid black;
            border-radius: 5px;
            pointer-events: none;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="bubbleChart.js"></script>
    <div>
    <p>The COVID-19 pandemic had an extreme impact globally - causing millions upon millons of deaths, disrupting economies, and saturating hospitals with a lot of cases. It also highlighted the differences between cultures and society as a whole. Our question was: "Does poverty impact a person's response (death) to contracting COVID-19?" Our visualization aims to communicate the relationship between poverty rate and deaths per capita across different counties in the United States, with an emphasis on the COVID-19 data.</p><br>
    <p> The dataset contains various risk categories based on COVID-19 impact, which are displayed through colored bubbles representing different counties. Each bubble represents a county, with the size and color of the bubble conveying important information. The poverty rate is the proportion of the population in a county living below the poverty line, and it is measured as a percentage, which ranges from 0% to approximately 10%. Higher values indicate counties with a larger proportion of their population in poverty. The Y-axis shows deaths per capita for each county which is a measure of how many people in a county died from COVID-19 relative to the countyâ€™s population ranging from 0 to about 0.4. A higher death rate per capita indicates a higher COVID-19 mortality rate for that county. The size of each bubble represents the total population of a county ie. larger bubbles correspond to counties with a larger population, whereas smaller bubbles represent counties with smaller populations.The color of each bubble represents the risk category of the county based on its COVID-19 risk index: Blue represents counties with a Low Risk Index. Orange represents counties with an Above Average Risk Index. Red represents counties with a High Risk Index.</p><br>
    <p>The data used to create this visualization illustrated a relationship between the poverty rate and deaths per capita from COVID-19. Counties with higher poverty rates tend to have a higher number of deaths per capita. Counties with high poverty rates and high death rates per capita are often categorized as high-risk counties(colored in red). These counties likely experienced more severe COVID-19 outcomes. This makes sense because lower-income populations often face disparities in healthcare access, which can contribute to higher mortality rates during the pandemic.</p><br>
    <p> The work was communicated via slack and the work was split into the following. Ann started a flow dot graph which visualized COVID-19 cases across racial groups and was split by gender, using a grid of dots. When clicking on the graph, you would got from seeing the total population to the dots splitting into gender. The data transformation thate were done were: creating total counts for gender, splitting the dots into male and female groups and then dynamically updateing the visualization to reflect the current race. The encodings were dot color for gender (blue vs. pink) and the transition effects. This didn't show much discrepancy between genders and not all races were accounted for in the dataset so we decided to not explore this route further. Ann also created the writeup. We ended up liking the question of poverty rate influencing pandemic deaths for a country because we felt more could be communicated. Luisa created a bubble graph which we ultimately landed on. She transformed the data in the following ways, she calculated the total population and filtered the data based on risk categories. She also created a buble animation which would scale with the population. Her encodings were filling the bubble category with a risk color and creating an interactive tooltip to display county, state, poverty rate, deaths per capita, population, and risk category when hovering over the bubbles. Lauren provided crucial insight to the data transformation process by reverting the log transformed values using exponential transformation and creating a new column.</p><br>
    </div>
</body>
</html>
